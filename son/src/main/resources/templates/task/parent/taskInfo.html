<html xmlns:th="https://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/child_layout}"
      layout:fragment="Content">
<head>
    <link th:href="@{/css/student/task/tasklInfo.css}" rel="stylesheet">
    <script th:inline="javascript">
        const lectureNumber = [[${taskListVO.lectureNumber}]];
        const taskNumber = [[${taskListVO.taskNumber}]];
        const attachmentFileList = [[${attachmentFileVOList}]];
        console.log("과제 상세 정보: ",[[${taskListVO}]]);
        console.log("제출 파일 조회: ", [[${attachmentFileVOList}]], [[${attachmentFileVOList.size()}]]);
    </script>
    <script th:src="@{/js/task/taskInfo.js}"></script>
</head>
<body>
	<table class="table-custom">
		<tr>
			<th rowspan="2">제목</th>
			<td rowspan="2" class="highlight" th:text="${taskListVO.title}"></td>
			<th>게시일자</th>
			<td th:text="${#dates.format(taskListVO.postDate, 'yyyy년 MM월 dd일')}"></td>
		</tr>
		<tr>
			<th>제출기한</th>
			<td th:text="${#dates.format(taskListVO.submitDeadline, 'yyyy년 MM월 dd일')}"></td>
		</tr>
		<tr>
			<th>피드백 내용</th>
			<td colspan="3" th:text="${taskListVO.feedback}"></td>
		</tr>
		<tr>
			<th>제출된 파일</th>
			<td colspan="3">
				<div class="attachment-cards">
					<th:block th:each="files : ${taskListVO.attachmentFileVOList}">
						<div class="card" th:if="${files.isDeleted} == false">
							<a th:href="@{/parent/{studentNumber}/{lectureNumber}/task/{taskNumber}/download(
							    lectureNumber=${lectureNumber},
							    taskNumber=${taskNumber},
							    taskSubmitNumber=${taskSubmitNumber},
							    originalFileName=${files.originalFileName},
							    filePath=${files.filePath})}">
							    <span class="icons"><i class="fas fa-folder-open"></i></span><span th:text="${files.originalFileName}"></span>
							</a>
						</div>
					</th:block>
				</div>
			</td>
		</tr>
	</table>
</body>
</html>
