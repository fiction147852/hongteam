<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layouts/administrator_layout}"
	layout:fragment="content">
<head>

<title>강의 목록</title>

</head>

<body>
	<div class="row">
		<div class="col-md-6">
			<div class="card">
				<div class="table-responsive pt-3">
					<table class="table table-striped project-orders-table">
						<thead>
							<tr>
								<th>강의 번호</th>
								<th>강의 제목</th>
								<th>설명</th>
								<th>과목 코드</th>
								<th>비용</th>
								<th>시작일</th>
								<th>종료일</th>
								<th>수용 인원</th>
							</tr>
						</thead>
						<tbody>
							<th:block th:each="lecs : ${adminLecList}">
								<tr th:onclick="infoClick(lectureNumber=[[${lecs.lectureNumber}]])">
									<td th:text="${lecs.lectureNumber}">
									<td th:text="${lecs.lectureTitle}">
									<td th:text="${lecs.lectureDescription}">
									<td th:text="${lecs.subjectCode}">
									<td th:text="${lecs.lectureCost}">
									<td
										th:text="${#dates.format(lecs.lectureStartDate, 'yyyy-MM-dd')}">
									<td
										th:text="${#dates.format(lecs.lectureEndDate, 'yyyy-MM-dd')}">
									<td th:text="${lecs.capacity}">
								</tr>
							</th:block>
						</tbody>
					</table>
				</div>
			</div>
			<button type="button" class="btn btn-primary mt-3 float-end" 
					th:onclick="insertClick()">강의 등록</button>
		</div>
		<div class="col-md-6">
			<div class="card">
				<div class="table-responsive pt-3">
						<table id="lectureInfoTable" class="table">
						<h2>강의정보</h2>
							<tr>
								<th id="lectureNumber-name">강의 번호</th>
								<td id="lectureNumber"></td>
							</tr>
							<tr>
								<th id="lectureTitle-name">강의 제목</th>
								<td id="lectureTitle"></td>
							</tr>
							<tr>
								<th id="lectureDescription-name">강의 설명</th>
								<td id="lectureDescription"></td>
							</tr>
							<tr>
								<th id="lectureCost-name">강의 비용</th>
								<td id="lectureCost"></td>
							</tr>
							<tr>
								<th id="subjectCode-name">과목 코드</th>
								<td id="subjectCode"></td>
							</tr>
							<tr>
								<th id="detailSubjectCode-name">세부 과목 코드</th>
								<td id="detailSubjectCode"></td>
							</tr>
							<tr>
								<th id="capacity-name">수용 인원</th>
								<td id="capacity"></td>
							</tr>
							<tr>
								<th id="lectureLevelCode-name">강의 레벨 코드</th>
								<td id="lectureLevelCode"></td>
							</tr>
							<tr>
								<th id="weekdaysCode-name">강의 요일 코드</th>
								<td id="weekdaysCode"></td>
							</tr>
							<tr>
								<th id="timeCode-name">강의 시간 코드</th>
								<td id="timeCode"></td>
							</tr>
							<tr>
								<th id="lectureStartDate-name">강의 시작 날짜</th>
								<td id="lectureStartDate"></td>
							</tr>
							<tr>
								<th id="lectureEndDate-name">강의 종료 날짜</th>
								<td id="lectureEndDate"></td>
							</tr>
							<tr>
								<th id="instructorNumber-name">강사 번호</th>
								<td id="instructorNumber"></td>
							</tr>
						</table>
				</div>
			</div>
		</div>
	</div>
</body>

<script th:inline="javascript">
	function infoClick(lectureNumber) {
	    console.log(lectureNumber);
	    
	    $.ajax({
	    	type : 'GET',
	    	url : 'adminLectureInfo',
	    	data : {lectureNumber : lectureNumber},
	    	success :function(response){
			    console.log(lectureNumber);
			    Object.keys(response).forEach((key, idx) => {
					if (document.getElementById(key)){
					document.getElementById(key).innerText = response[key];
					}
				});
	    	},
			error : function(xhr, status, error) {
				console.error('Error fetching member info:', error);
			}
	    	
	    	
	    })
	}

	function insertClick(){
		
	}
</script>


</html>

