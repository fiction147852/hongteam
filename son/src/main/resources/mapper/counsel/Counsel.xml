<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.son.app.counsel.mapper.CounselMapper">

	<!-- 상담 일정 전체 조회 -->
	<select id="counselSelectAll" resultType="CounselVO">
		SELECT counsel_number
				, parent_name
				, student_name
				, phone
				, time_code
				, reservation_date
				, reservation_code
		FROM admission_counsel
	</select>

	<!-- 상담 일정 단건 조회 -->
	<select id="counselSelectInfo" resultType="CounselVO">
		SELECT counsel_number
				, parent_name
				, student_name
				, phone
				, time_code
				, reservation_date
				, reservation_code
		FROM admission_counsel
		WHERE counsel_number = #{counselNumber}
	</select>
		
	<!-- 주간 시간 조회 -->
	<select id="counselWeekTimeSelectAll" resultType="AdmissioncounselPossibilityVO">
		SELECT weekdays_code
				, time_code
		FROM admission_counsel_possibility
	</select>
		
	<!-- 주간 시간 설정 -->
	<update id="counselWeekTimeUpdate" parameterType="AdmissioncounselPossibilityVO">
			UPDATE admission_counsel_possibility
			SET
				time_code = #{timeCode}
			WHERE weekdays_code = #{weekdaysCode}
	</update>
		
		
	<!-- 일간 상담 조회 ====================== -->
	<select id="counselDayTimeSelectAll" resultType="AdmissioncounselPossibilityVO">
		SELECT weekdays_code
				, time_code
				, possible
		FROM counsel_impossibility
	</select>

	<!--  일간 상담 설정 -->
	<update id="counselDayTimeUpdate" parameterType="AdmissioncounselPossibilityVO">
			UPDATE counsel_impossibility
			SET
				time_code = #{timeCode}
				, possible = #{possible}
			WHERE weekdays_code = #{weekdaysCode}
	</update>



	<!-- 상담 일정 신청 -->
		<select id="counselInsert" resultType="CounselVO">
		 INSERT INTO admission_counsel
		 		(
		 		counsel_number
				, parent_name
				, student_name
				, phone
				, time_code
				, reservation_date
		 		)
		 	VALUES
		 		(
		 		#{counselNumber}
		 		#{parentName}
		 		#{studentName}
		 		#{phone}
		 		#{timeCode}
		 		#{reservationDate}
		 		)
		
		</select>
		
		
		
		
		
		
</mapper>
