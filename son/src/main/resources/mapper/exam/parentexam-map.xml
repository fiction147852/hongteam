<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.son.app.exam.mapper.ParentExamMapper">

    <select id="childExamList" resultType="ParentChildExamVO">
SELECT p.test_number
, participate_number
, test_title
, TO_CHAR(exam_date, 'yyyy-MM-dd') as exam_date
, total_score
, participate_status
FROM participate p
    JOIN test t
        ON p.test_number = t.test_number
WHERE p.test_number in (SELECT test_number
                    FROM test
                    WHERE test_number in (SELECT test_number
                                FROM participate
                                WHERE student_number = #{studentNumber})
                            AND lecture_number = #{lectureNumber})
                    AND student_number = #{studentNumber}
    </select>

</mapper>